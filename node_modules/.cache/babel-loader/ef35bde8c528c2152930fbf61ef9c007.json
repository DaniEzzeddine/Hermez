{"ast":null,"code":"import _classCallCheck from \"/Users/DaniEzzeddine/Hermez/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/DaniEzzeddine/Hermez/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/DaniEzzeddine/Hermez/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/DaniEzzeddine/Hermez/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/DaniEzzeddine/Hermez/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/DaniEzzeddine/Hermez/src/components/tabs/ActiveMailingList.jsx\";\nimport React, { Component } from 'react';\nimport UserEditModal from 'UserEditModal';\nimport axios from 'axios';\n\nvar ActiveMailingList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ActiveMailingList, _Component);\n\n  function ActiveMailingList(props) {\n    var _this;\n\n    _classCallCheck(this, ActiveMailingList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ActiveMailingList).call(this, props));\n\n    _this.sendMail = function () {\n      var old_state = Object.assign({}, _this.state);\n      axios.get(\"/sendmail\").then(function (res) {\n        console.log(res);\n      });\n      old_state.userList = [];\n\n      _this.setState(old_state);\n    };\n\n    _this.handleDeleteUser = function (user, userNumber) {\n      var old_state = Object.assign({}, _this.state);\n      axios.get(\"/deleterecipient\", {\n        params: {\n          input: user\n        }\n      }).then(function (res) {\n        console.log(res);\n      });\n      old_state.userList.splice(userNumber, 1);\n\n      _this.setState(old_state);\n    };\n\n    _this.handleOnClick = function (event) {\n      var old_state = Object.assign({}, _this.state);\n      var userFlag = false;\n      old_state.userList.map(function (user) {\n        if (user[1] === event.target.value) userFlag = true;\n      });\n\n      if (!userFlag) {\n        old_state.userList.push([old_state.userList.length, event.target.value]);\n        axios.get(\"/insertrecipient\", {\n          params: {\n            input: event.target.value\n          }\n        }).then(function (res) {\n          console.log(res);\n        });\n\n        _this.setState(old_state);\n      }\n    };\n\n    _this.handleChange = function (event) {\n      if (event.target.value !== \"\") {\n        _this.setState({\n          any_input: true\n        });\n\n        axios.get(\"/autocomplete\", {\n          params: {\n            input: event.target.value\n          }\n        }).then(function (res) {\n          _this.setState({\n            find_users: res.data.data\n          });\n        });\n      } else _this.setState({\n        any_input: false\n      });\n    };\n\n    _this.state = {\n      userList: [],\n      any_input: false,\n      isModal: false,\n      userEdit: -1,\n      find_users: []\n    };\n    return _this;\n  }\n\n  _createClass(ActiveMailingList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Make action call here\n      var old_state = Object.assign({}, this.state);\n      axios.get(\"/getrecipients\").then(function (res) {\n        old_state.userList = res.data.data;\n        console.log(old_state.userList);\n\n        _this2.setState(old_state);\n      }); // old_state.userList = [\n      //   [\n      //     1,\n      //     \"Eblan\"\n      //   ],\n      //   [\n      //     2,\n      //     \"Eblan\"\n      //   ],\n      //   [\n      //     3,\n      //    \"Eblan\"\n      //   ]\n      // ];\n    } // componentDidUpdate() {\n    //   // Make action call here\n    //   let old_state = Object.assign({}, this.state);\n    //   if (old_state == )\n    //   axios.get(\"/getrecipients\")\n    //   .then(res => {\n    //     if (old_state.userList = res.data.data)\n    //     old_state.userList = res.data.data;\n    //     console.log(old_state.userList);\n    //     this.setState(old_state);\n    //   });\n    // }\n\n  }, {\n    key: \"modalTogler\",\n    value: function modalTogler(user) {\n      var old_state = Object.assign({}, this.state);\n      old_state.isModal = !old_state.isModal;\n      if (user === -1) old_state.userEdit = -1;else old_state.userEdit = user;\n      this.setState(old_state);\n    }\n  }, {\n    key: \"modalSave\",\n    value: function modalSave(user) {\n      var old_state = Object.assign({}, this.state);\n      axios.get('/changerecipient', {\n        params: {\n          old_value: old_state.userList[old_state.userEdit][1],\n          new_value: user.userIntraname\n        }\n      });\n      old_state.userList[old_state.userEdit][1] = user.userIntraname;\n      old_state.isModal = !old_state.isModal;\n      old_state.userEdit = -1;\n      this.setState(old_state);\n    }\n  }, {\n    key: \"generateList\",\n    value: function generateList() {\n      var _this3 = this;\n\n      if (this.state.userList.length === 0) return null;\n      return this.state.userList.map(function (user, index) {\n        return React.createElement(\"tr\", {\n          key: user[0],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          style: {\n            align: \"center\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, user[1]), React.createElement(\"td\", {\n          style: {\n            align: \"center\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: _this3.modalTogler.bind(_this3, index),\n          className: \"btn btn-primary btn-info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, \"Edit\")), React.createElement(\"td\", {\n          style: {\n            align: \"center\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          href: \"#\",\n          onClick: _this3.handleDeleteUser.bind(_this3, user[1], index),\n          className: \"btn btn-primary btn-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \"Delete\")));\n      });\n    }\n  }, {\n    key: \"renderDropdown\",\n    value: function renderDropdown() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        style: {\n          width: \"\u001c100%\",\n          zIndex: '1000',\n          backgroundColor: \"white\"\n        },\n        className: \" dropdown border position-fixed display-none border-top-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, this.state.any_input ? this.state.find_users.map(function (user) {\n        return React.createElement(\"option\", {\n          className: \"dropdown-item w-100\",\n          style: {\n            backgroundColor: \"\u001c#eee\"\n          },\n          onClick: _this4.handleOnClick,\n          value: user[2],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, user[2]);\n      }) : null);\n    }\n  }, {\n    key: \"renderModal\",\n    value: function renderModal() {\n      return React.createElement(UserEditModal, {\n        isModal: this.state.isModal,\n        modalClose: this.modalTogler.bind(this, -1),\n        modalSave: this.modalSave.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var modal_show = null;\n      if (this.state.isModal && this.state.userEdit > -1) modal_show = this.renderModal();\n      return React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control\",\n        type: \"text\",\n        name: \"input\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), this.state.any_input ? this.renderDropdown() : null)), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"panel panel-default user_panel w-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"panel-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        class: \"panel-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"User List\")), React.createElement(\"div\", {\n        class: \"panel-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"table-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        class: \"table-users table\",\n        border: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, this.generateList())))))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-success\",\n        onClick: this.sendMail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Success\")))), modal_show);\n    }\n  }]);\n\n  return ActiveMailingList;\n}(Component);\n\nexport default ActiveMailingList;","map":{"version":3,"sources":["/Users/DaniEzzeddine/Hermez/src/components/tabs/ActiveMailingList.jsx"],"names":["React","Component","UserEditModal","axios","ActiveMailingList","props","sendMail","old_state","Object","assign","state","get","then","res","console","log","userList","setState","handleDeleteUser","user","userNumber","params","input","splice","handleOnClick","event","userFlag","map","target","value","push","length","handleChange","any_input","find_users","data","isModal","userEdit","old_value","new_value","userIntraname","index","align","modalTogler","bind","width","zIndex","backgroundColor","modalSave","modal_show","renderModal","renderDropdown","generateList"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport UserEditModal from 'UserEditModal';\nimport axios from 'axios';\n\ntype Props = {};\ntype State = {\n  find_users:array,\n  isModal: boolean,\n  userEdit: int,\n  recipients: array,\n  any_input:boolean\n};\n\nclass ActiveMailingList extends Component<Props, State> {\n\n  props: Props;\n  state: State;\n  constructor(props) {\n    super(props);\n    this.state = {\n      userList: [],\n      any_input : false,\n      isModal: false,\n      userEdit: -1,\n      find_users: []\n    };\n  }\n\n  sendMail = () => {\n    let old_state = Object.assign({}, this.state);\n\n    axios.get(\"/sendmail\")\n    .then(res => {console.log(res)})\n    old_state.userList = [];\n    this.setState(old_state);\n  }\n\n  handleDeleteUser = (user, userNumber) => {\n    let old_state = Object.assign({}, this.state);\n    axios.get(\"/deleterecipient\", {params:{input: user}})\n    .then(res => {console.log(res)})\n    old_state.userList.splice(userNumber, 1);\n    this.setState(old_state);\n  }\n\n  handleOnClick = (event) => {\n    let old_state = Object.assign({}, this.state);\n    let userFlag = false;\n    old_state.userList.map((user) => {\n      if (user[1] === event.target.value)\n        userFlag = true;\n    });\n    if (!userFlag)\n    {\n      old_state.userList.push([old_state.userList.length, event.target.value])\n      axios.get(\"/insertrecipient\", {params:{input:event.target.value}})\n      .then(res => {console.log(res)})\n      this.setState(old_state);\n    }\n  }\n\n  handleChange = (event) => {\n    if (event.target.value !== \"\"){\n      this.setState({any_input : true});\n      axios.get(`/autocomplete`, {params:{input:event.target.value}})\n      .then(res => {\n        this.setState({find_users: res.data.data});\n      })}\n      else \n        this.setState({any_input : false});\n  }\n\n  componentDidMount() {\n    // Make action call here\n    let old_state = Object.assign({}, this.state);\n    axios.get(\"/getrecipients\")\n    .then(res => {\n      old_state.userList = res.data.data;\n      console.log(old_state.userList);\n      this.setState(old_state)\n    })\n    // old_state.userList = [\n    //   [\n    //     1,\n    //     \"Eblan\"\n    //   ],\n    //   [\n    //     2,\n    //     \"Eblan\"\n    //   ],\n    //   [\n    //     3,\n    //    \"Eblan\"\n    //   ]\n    // ];\n  }\n  // componentDidUpdate() {\n  //   // Make action call here\n  //   let old_state = Object.assign({}, this.state);\n  //   if (old_state == )\n  //   axios.get(\"/getrecipients\")\n  //   .then(res => {\n  //     if (old_state.userList = res.data.data)\n  //     old_state.userList = res.data.data;\n  //     console.log(old_state.userList);\n  //     this.setState(old_state);\n  //   });\n  // }\n  modalTogler(user: int) {\n    let old_state = Object.assign({}, this.state);\n    old_state.isModal = !old_state.isModal;\n    if (user === -1)\n      old_state.userEdit = -1;\n    else\n      old_state.userEdit = user;\n    this.setState(old_state);\n  }\n\n  modalSave(user: object) {\n    let old_state = Object.assign({}, this.state);\n    axios.get('/changerecipient', {params: {old_value:old_state.userList[old_state.userEdit][1], new_value:user.userIntraname}});\n    old_state.userList[old_state.userEdit][1] = user.userIntraname;\n    old_state.isModal = !old_state.isModal;\n    old_state.userEdit = -1;\n    this.setState(old_state);\n  }\n\n  generateList() {\n    if (this.state.userList.length === 0)\n      return null;\n    return this.state.userList.map((user, index) => {\n      return (\n        <tr\n          key={user[0]}\n        >\n         <td style={{align:\"center\"}}>\n              {user[1]}\n          </td>\n          <td style={{align:\"center\"}}>\n          <button onClick={this.modalTogler.bind(this, index)} className=\"btn btn-primary btn-info\">Edit</button>\n          </td>\n          <td style={{align:\"center\"}}>\n          <button href=\"#\" onClick={this.handleDeleteUser.bind(this, user[1], index)} className=\"btn btn-primary btn-danger\">Delete</button>\n          </td>\n        </tr>\n      );\n    })\n  }\n\n\n  renderDropdown() {\n    return (\n      <div style={{width: \"\u001c100%\", zIndex: '1000', backgroundColor: \"white\"}} className=\" dropdown border position-fixed display-none border-top-0\">\n      {this.state.any_input?\n        this.state.find_users.map((user) => {\n          return (\n            <option\n              className=\"dropdown-item w-100\"\n              style={{ backgroundColor:\"\u001c#eee\"  }}\n              onClick={this.handleOnClick}\n              value={user[2]}\n            >\n            {user[2]}\n            </option>\n          )}): null}\n    </div>\n    )\n  }\nuserIntra\n  renderModal() {\n    return (\n      <UserEditModal\n        isModal={this.state.isModal}\n        modalClose={this.modalTogler.bind(this, -1)}\n        modalSave={this.modalSave.bind(this)}\n      />\n    );\n  }\n\n  render() {\n    let modal_show = null;\n    if (this.state.isModal && this.state.userEdit > -1)\n      modal_show = this.renderModal();\n    return (\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <input\n                className=\"form-control\"\n                type=\"text\"\n                name=\"input\"\n                onChange={this.handleChange}\n              />\n              {this.state.any_input?this.renderDropdown():null}\n            </div>\n          </div>\n          <div className=\"row\">\n            <div class=\"panel panel-default user_panel w-100\">\n              <div class=\"panel-heading\">\n                <h3 class=\"panel-title\">User List</h3>\n              </div>\n              <div class=\"panel-body\">\n\t\t\t\t        <div class=\"table-container\">\n                  <table class=\"table-users table\" border=\"0\">\n                    <tbody>\n                      {this.generateList()}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n        <div className=\"row\">\n          <div className=\"col\">\n            <button\n            type=\"button\"\n            class=\"btn btn-success\"\n            onClick={this.sendMail}\n            >Success</button>\n          </div>\n        </div>\n        </div>\n        {modal_show}\n      </div>\n    );\n  }\n}\n\nexport default ActiveMailingList;\n"]},"metadata":{},"sourceType":"module"}